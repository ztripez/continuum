(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}})();var V,y,ye,H,le,ge,be,ke,ee,Q,X,q={},Se=[],Te=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,j=Array.isArray;function R(e,n){for(var t in n)e[t]=n[t];return e}function ne(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function xe(e,n,t){var i,l,r,o={};for(r in n)r=="key"?i=n[r]:r=="ref"?l=n[r]:o[r]=n[r];if(arguments.length>2&&(o.children=arguments.length>3?V.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)o[r]===void 0&&(o[r]=e.defaultProps[r]);return M(e,o,i,l,null)}function M(e,n,t,i,l){var r={type:e,props:n,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++ye,__i:-1,__u:0};return l==null&&y.vnode!=null&&y.vnode(r),r}function $(e){return e.children}function O(e,n){this.props=e,this.context=n}function T(e,n){if(n==null)return e.__?T(e.__,e.__i+1):null;for(var t;n<e.__k.length;n++)if((t=e.__k[n])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?T(e):null}function Ce(e){var n,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((t=e.__k[n])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return Ce(e)}}function ce(e){(!e.__d&&(e.__d=!0)&&H.push(e)&&!z.__r++||le!=y.debounceRendering)&&((le=y.debounceRendering)||ge)(z)}function z(){for(var e,n,t,i,l,r,o,d=1;H.length;)H.length>d&&H.sort(be),e=H.shift(),d=H.length,e.__d&&(t=void 0,i=void 0,l=(i=(n=e).__v).__e,r=[],o=[],n.__P&&((t=R({},i)).__v=i.__v+1,y.vnode&&y.vnode(t),te(n.__P,t,i,n.__n,n.__P.namespaceURI,32&i.__u?[l]:null,r,l??T(i),!!(32&i.__u),o),t.__v=i.__v,t.__.__k[t.__i]=t,Ee(r,t,o),i.__e=i.__=null,t.__e!=l&&Ce(t)));z.__r=0}function $e(e,n,t,i,l,r,o,d,a,_,u){var c,f,h,g,S,p,v,m=i&&i.__k||Se,E=n.length;for(a=Fe(t,n,m,a,E),c=0;c<E;c++)(h=t.__k[c])!=null&&(f=h.__i==-1?q:m[h.__i]||q,h.__i=c,p=te(e,h,f,l,r,o,d,a,_,u),g=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&se(f.ref,null,h),u.push(h.ref,h.__c||g,h)),S==null&&g!=null&&(S=g),(v=!!(4&h.__u))||f.__k===h.__k?a=we(h,a,e,v):typeof h.type=="function"&&p!==void 0?a=p:g&&(a=g.nextSibling),h.__u&=-7);return t.__e=S,a}function Fe(e,n,t,i,l){var r,o,d,a,_,u=t.length,c=u,f=0;for(e.__k=new Array(l),r=0;r<l;r++)(o=n[r])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=e.__k[r]=M(null,o,null,null,null):j(o)?o=e.__k[r]=M($,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=e.__k[r]=M(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):e.__k[r]=o,a=r+f,o.__=e,o.__b=e.__b+1,d=null,(_=o.__i=qe(o,t,a,c))!=-1&&(c--,(d=t[_])&&(d.__u|=2)),d==null||d.__v==null?(_==-1&&(l>u?f--:l<u&&f++),typeof o.type!="function"&&(o.__u|=4)):_!=a&&(_==a-1?f--:_==a+1?f++:(_>a?f--:f++,o.__u|=4))):e.__k[r]=null;if(c)for(r=0;r<u;r++)(d=t[r])!=null&&!(2&d.__u)&&(d.__e==i&&(i=T(d)),Pe(d,d));return i}function we(e,n,t,i){var l,r;if(typeof e.type=="function"){for(l=e.__k,r=0;l&&r<l.length;r++)l[r]&&(l[r].__=e,n=we(l[r],n,t,i));return n}e.__e!=n&&(i&&(n&&e.type&&!n.parentNode&&(n=T(e)),t.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function qe(e,n,t,i){var l,r,o,d=e.key,a=e.type,_=n[t],u=_!=null&&(2&_.__u)==0;if(_===null&&d==null||u&&d==_.key&&a==_.type)return t;if(i>(u?1:0)){for(l=t-1,r=t+1;l>=0||r<n.length;)if((_=n[o=l>=0?l--:r++])!=null&&!(2&_.__u)&&d==_.key&&a==_.type)return o}return-1}function oe(e,n,t){n[0]=="-"?e.setProperty(n,t??""):e[n]=t==null?"":typeof t!="number"||Te.test(n)?t:t+"px"}function W(e,n,t,i,l){var r,o;e:if(n=="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(n in i)t&&n in t||oe(e.style,n,"");if(t)for(n in t)i&&t[n]==i[n]||oe(e.style,n,t[n])}else if(n[0]=="o"&&n[1]=="n")r=n!=(n=n.replace(ke,"$1")),o=n.toLowerCase(),n=o in e||n=="onFocusOut"||n=="onFocusIn"?o.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+r]=t,t?i?t.u=i.u:(t.u=ee,e.addEventListener(n,r?X:Q,r)):e.removeEventListener(n,r?X:Q,r);else{if(l=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&t==1?"":t))}}function _e(e){return function(n){if(this.l){var t=this.l[n.type+e];if(n.t==null)n.t=ee++;else if(n.t<t.u)return;return t(y.event?y.event(n):n)}}}function te(e,n,t,i,l,r,o,d,a,_){var u,c,f,h,g,S,p,v,m,E,N,L,x,ie,U,F,G,w=n.type;if(n.constructor!==void 0)return null;128&t.__u&&(a=!!(32&t.__u),r=[d=n.__e=t.__e]),(u=y.__b)&&u(n);e:if(typeof w=="function")try{if(v=n.props,m="prototype"in w&&w.prototype.render,E=(u=w.contextType)&&i[u.__c],N=u?E?E.props.value:u.__:i,t.__c?p=(c=n.__c=t.__c).__=c.__E:(m?n.__c=c=new w(v,N):(n.__c=c=new O(v,N),c.constructor=w,c.render=Le),E&&E.sub(c),c.state||(c.state={}),c.__n=i,f=c.__d=!0,c.__h=[],c._sb=[]),m&&c.__s==null&&(c.__s=c.state),m&&w.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=R({},c.__s)),R(c.__s,w.getDerivedStateFromProps(v,c.__s))),h=c.props,g=c.state,c.__v=n,f)m&&w.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),m&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(m&&w.getDerivedStateFromProps==null&&v!==h&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(v,N),n.__v==t.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(v,c.__s,N)===!1){for(n.__v!=t.__v&&(c.props=v,c.state=c.__s,c.__d=!1),n.__e=t.__e,n.__k=t.__k,n.__k.some(function(A){A&&(A.__=n)}),L=0;L<c._sb.length;L++)c.__h.push(c._sb[L]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(v,c.__s,N),m&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(h,g,S)})}if(c.context=N,c.props=v,c.__P=e,c.__e=!1,x=y.__r,ie=0,m){for(c.state=c.__s,c.__d=!1,x&&x(n),u=c.render(c.props,c.state,c.context),U=0;U<c._sb.length;U++)c.__h.push(c._sb[U]);c._sb=[]}else do c.__d=!1,x&&x(n),u=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++ie<25);c.state=c.__s,c.getChildContext!=null&&(i=R(R({},i),c.getChildContext())),m&&!f&&c.getSnapshotBeforeUpdate!=null&&(S=c.getSnapshotBeforeUpdate(h,g)),F=u,u!=null&&u.type===$&&u.key==null&&(F=Re(u.props.children)),d=$e(e,j(F)?F:[F],n,t,i,l,r,o,d,a,_),c.base=n.__e,n.__u&=-161,c.__h.length&&o.push(c),p&&(c.__E=c.__=null)}catch(A){if(n.__v=null,a||r!=null)if(A.then){for(n.__u|=a?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;r[r.indexOf(d)]=null,n.__e=d}else{for(G=r.length;G--;)ne(r[G]);Y(n)}else n.__e=t.__e,n.__k=t.__k,A.then||Y(n);y.__e(A,n,t)}else r==null&&n.__v==t.__v?(n.__k=t.__k,n.__e=t.__e):d=n.__e=De(t.__e,n,t,i,l,r,o,a,_);return(u=y.diffed)&&u(n),128&n.__u?void 0:d}function Y(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Y)}function Ee(e,n,t){for(var i=0;i<t.length;i++)se(t[i],t[++i],t[++i]);y.__c&&y.__c(n,e),e.some(function(l){try{e=l.__h,l.__h=[],e.some(function(r){r.call(l)})}catch(r){y.__e(r,l.__v)}})}function Re(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:j(e)?e.map(Re):R({},e)}function De(e,n,t,i,l,r,o,d,a){var _,u,c,f,h,g,S,p=t.props||q,v=n.props,m=n.type;if(m=="svg"?l="http://www.w3.org/2000/svg":m=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),r!=null){for(_=0;_<r.length;_++)if((h=r[_])&&"setAttribute"in h==!!m&&(m?h.localName==m:h.nodeType==3)){e=h,r[_]=null;break}}if(e==null){if(m==null)return document.createTextNode(v);e=document.createElementNS(l,m,v.is&&v),d&&(y.__m&&y.__m(n,r),d=!1),r=null}if(m==null)p===v||d&&e.data==v||(e.data=v);else{if(r=r&&V.call(e.childNodes),!d&&r!=null)for(p={},_=0;_<e.attributes.length;_++)p[(h=e.attributes[_]).name]=h.value;for(_ in p)if(h=p[_],_!="children"){if(_=="dangerouslySetInnerHTML")c=h;else if(!(_ in v)){if(_=="value"&&"defaultValue"in v||_=="checked"&&"defaultChecked"in v)continue;W(e,_,null,h,l)}}for(_ in v)h=v[_],_=="children"?f=h:_=="dangerouslySetInnerHTML"?u=h:_=="value"?g=h:_=="checked"?S=h:d&&typeof h!="function"||p[_]===h||W(e,_,h,p[_],l);if(u)d||c&&(u.__html==c.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),n.__k=[];else if(c&&(e.innerHTML=""),$e(n.type=="template"?e.content:e,j(f)?f:[f],n,t,i,m=="foreignObject"?"http://www.w3.org/1999/xhtml":l,r,o,r?r[0]:t.__k&&T(t,0),d,a),r!=null)for(_=r.length;_--;)ne(r[_]);d||(_="value",m=="progress"&&g==null?e.removeAttribute("value"):g!=null&&(g!==e[_]||m=="progress"&&!g||m=="option"&&g!=p[_])&&W(e,_,g,p[_],l),_="checked",S!=null&&S!=e[_]&&W(e,_,S,p[_],l))}return e}function se(e,n,t){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&n==null||(e.__u=e(n))}else e.current=n}catch(l){y.__e(l,t)}}function Pe(e,n,t){var i,l;if(y.unmount&&y.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||se(i,null,n)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){y.__e(r,n)}i.base=i.__P=null}if(i=e.__k)for(l=0;l<i.length;l++)i[l]&&Pe(i[l],n,t||typeof e.type!="function");t||ne(e.__e),e.__c=e.__=e.__e=void 0}function Le(e,n,t){return this.constructor(e,t)}function Ue(e,n,t){var i,l,r,o;n==document&&(n=document.documentElement),y.__&&y.__(e,n),l=(i=!1)?null:n.__k,r=[],o=[],te(n,e=n.__k=xe($,null,[e]),l||q,q,n.namespaceURI,l?null:n.firstChild?V.call(n.childNodes):null,r,l?l.__e:n.firstChild,i,o),Ee(r,e,o)}V=Se.slice,y={__e:function(e,n,t,i){for(var l,r,o;n=n.__;)if((l=n.__c)&&!l.__)try{if((r=l.constructor)&&r.getDerivedStateFromError!=null&&(l.setState(r.getDerivedStateFromError(e)),o=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,i||{}),o=l.__d),o)return l.__E=l}catch(d){e=d}throw e}},ye=0,O.prototype.setState=function(e,n){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=R({},this.state),typeof e=="function"&&(e=e(R({},t),this.props)),e&&R(t,e),e!=null&&this.__v&&(n&&this._sb.push(n),ce(this))},O.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ce(this))},O.prototype.render=$,H=[],ge=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,be=function(e,n){return e.__v.__b-n.__v.__b},z.__r=0,ke=/(PointerCapture)$|Capture$/i,ee=0,Q=_e(!1),X=_e(!0);var We=0;function s(e,n,t,i,l,r){n||(n={});var o,d,a=n;if("ref"in a)for(d in a={},n)d=="ref"?o=n[d]:a[d]=n[d];var _={type:e,props:a,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--We,__i:-1,__u:0,__source:l,__self:r};if(typeof e=="function"&&(o=e.defaultProps))for(d in o)a[d]===void 0&&(a[d]=o[d]);return y.vnode&&y.vnode(_),_}var D,b,K,ae,J=0,Ne=[],k=y,de=k.__b,ue=k.__r,he=k.diffed,pe=k.__c,fe=k.unmount,ve=k.__;function re(e,n){k.__h&&k.__h(b,e,J||n),J=0;var t=b.__H||(b.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function C(e){return J=1,Me(Ae,e)}function Me(e,n,t){var i=re(D++,2);if(i.t=e,!i.__c&&(i.__=[Ae(void 0,n),function(d){var a=i.__N?i.__N[0]:i.__[0],_=i.t(a,d);a!==_&&(i.__N=[_,i.__[1]],i.__c.setState({}))}],i.__c=b,!b.__f)){var l=function(d,a,_){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!r||r.call(this,d,a,_);var c=i.__c.props!==d;return u.forEach(function(f){if(f.__N){var h=f.__[0];f.__=f.__N,f.__N=void 0,h!==f.__[0]&&(c=!0)}}),r&&r.call(this,d,a,_)||c};b.__f=!0;var r=b.shouldComponentUpdate,o=b.componentWillUpdate;b.componentWillUpdate=function(d,a,_){if(this.__e){var u=r;r=void 0,l(d,a,_),r=u}o&&o.call(this,d,a,_)},b.shouldComponentUpdate=l}return i.__N||i.__}function P(e,n){var t=re(D++,3);!k.__s&&He(t.__H,n)&&(t.__=e,t.u=n,b.__H.__h.push(t))}function I(e){return J=5,Oe(function(){return{current:e}},[])}function Oe(e,n){var t=re(D++,7);return He(t.__H,n)&&(t.__=e(),t.__H=n,t.__h=e),t.__}function Ie(){for(var e;e=Ne.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(B),e.__H.__h.forEach(Z),e.__H.__h=[]}catch(n){e.__H.__h=[],k.__e(n,e.__v)}}k.__b=function(e){b=null,de&&de(e)},k.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),ve&&ve(e,n)},k.__r=function(e){ue&&ue(e),D=0;var n=(b=e.__c).__H;n&&(K===b?(n.__h=[],b.__h=[],n.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(n.__h.forEach(B),n.__h.forEach(Z),n.__h=[],D=0)),K=b},k.diffed=function(e){he&&he(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(Ne.push(n)!==1&&ae===k.requestAnimationFrame||((ae=k.requestAnimationFrame)||Be)(Ie)),n.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),K=b=null},k.__c=function(e,n){n.some(function(t){try{t.__h.forEach(B),t.__h=t.__h.filter(function(i){return!i.__||Z(i)})}catch(i){n.some(function(l){l.__h&&(l.__h=[])}),n=[],k.__e(i,t.__v)}}),pe&&pe(e,n)},k.unmount=function(e){fe&&fe(e);var n,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{B(i)}catch(l){n=l}}),t.__H=void 0,n&&k.__e(n,t.__v))};var me=typeof requestAnimationFrame=="function";function Be(e){var n,t=function(){clearTimeout(i),me&&cancelAnimationFrame(n),setTimeout(e)},i=setTimeout(t,35);me&&(n=requestAnimationFrame(t))}function B(e){var n=b,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),b=n}function Z(e){var n=b;e.__c=e.__(),b=n}function He(e,n){return!e||e.length!==n.length||n.some(function(t,i){return t!==e[i]})}function Ae(e,n){return typeof n=="function"?n(e):n}function ze(e){const[n,t]=C("connecting"),i=I(null),l=I(1),r=I(new Map);P(()=>{const a=new WebSocket(e);return i.current=a,a.onopen=()=>{console.log("WebSocket connected"),t("connected")},a.onclose=()=>{console.log("WebSocket disconnected"),t("disconnected")},a.onerror=_=>{console.error("WebSocket error:",_),t("disconnected")},a.onmessage=_=>{try{const u=JSON.parse(_.data),c="type"in u?u.type:"response",f=r.current.get(c);f&&f.forEach(g=>g(u));const h=r.current.get("*");h&&h.forEach(g=>g(u))}catch(u){console.error("Failed to parse WebSocket message:",u)}},()=>{a.close()}},[e]);const o=(a,_)=>new Promise((u,c)=>{if(!i.current||i.current.readyState!==WebSocket.OPEN){c(new Error("WebSocket not connected"));return}const f=l.current++,h={id:f,type:a,payload:_},S=d("response",p=>{"id"in p&&p.id===f&&(S(),p.ok?u(p.payload):c(new Error(p.error||"Request failed")))});try{i.current.send(JSON.stringify(h))}catch(p){S(),c(p)}setTimeout(()=>{S(),c(new Error("Request timeout"))},3e4)}),d=(a,_)=>(r.current.has(a)||r.current.set(a,new Set),r.current.get(a).add(_),()=>{const u=r.current.get(a);u&&(u.delete(_),u.size===0&&r.current.delete(a))});return{status:n,sendRequest:o,subscribe:d}}function Je({status:e,tickInfo:n,ws:t,hasErrors:i}){var f;const[l,r]=C("stopped"),[o,d]=C(null);P(()=>{i&&r("error")},[i]),P(()=>{t.status==="connected"&&t.sendRequest("status").then(h=>{r(h.running?"running":"stopped")}).catch(console.error)},[t.status]);const a=()=>{t.sendRequest("step",{count:1}).then(()=>r("stopped")).catch(h=>{d(h.message||"Step failed"),r("error")})},_=()=>{t.sendRequest("run").then(()=>r("running")).catch(h=>{d(h.message||"Run failed"),r("error")})},u=()=>{t.sendRequest("stop").then(()=>r("stopped")).catch(console.error)},c=()=>{switch(l){case"running":return"RUNNING";case"stopped":return"STOPPED";case"paused":return"PAUSED";case"error":return o||"ERROR"}};return s("header",{class:"header",children:[s("div",{class:"header-left",children:[s("h1",{children:"Continuum Inspector"}),s("div",{class:`sim-status sim-status-${l}`,children:[s("span",{class:"sim-status-indicator"}),s("span",{class:"sim-status-label",children:c()})]})]}),s("div",{class:"header-controls",children:[s("button",{onClick:a,disabled:l==="running",class:"control-btn",title:"Step one tick",children:[s("span",{class:"icon",children:"⏭"}),"Step"]}),s("button",{onClick:_,disabled:l==="running",class:"control-btn primary",title:"Run simulation",children:[s("span",{class:"icon",children:"▶"}),"Run"]}),s("button",{onClick:u,disabled:l==="stopped"||l==="error",class:"control-btn danger",title:"Stop simulation",children:[s("span",{class:"icon",children:"⏹"}),"Stop"]})]}),s("div",{class:"header-info",children:[n&&s("div",{class:"tick-info",children:[s("div",{class:"info-item",children:[s("span",{class:"info-label",children:"Tick"}),s("span",{class:"info-value",children:n.tick})]}),s("div",{class:"info-item",children:[s("span",{class:"info-label",children:"Era"}),s("span",{class:"info-value",children:n.era})]}),s("div",{class:"info-item",children:[s("span",{class:"info-label",children:"Time"}),s("span",{class:"info-value",children:[(f=n.sim_time)==null?void 0:f.toFixed(2),"s"]})]})]}),s("div",{class:`connection-status connection-${e}`,children:[s("span",{class:"connection-indicator"}),s("span",{class:"connection-label",children:e==="connected"?"Connected":e==="connecting"?"Connecting...":"Disconnected"})]})]})]})}function Ve({currentTab:e,onTabChange:n,onSelectItem:t,ws:i}){const[l,r]=C([]),[o,d]=C([]),[a,_]=C([]),[u,c]=C([]);P(()=>i.status!=="connected"?void 0:(i.sendRequest("signal.list").then(v=>{r(v.signals||[])}).catch(console.error),i.sendRequest("field.list").then(v=>{d(v.fields||[])}).catch(console.error),i.sendRequest("entity.list").then(v=>{_(v.entities||[])}).catch(console.error),i.subscribe("chronicle.event",v=>{"type"in v&&v.type==="chronicle.event"&&c(m=>[...m,{...v.payload,timestamp:new Date}].slice(-200))})),[i.status]);const f=p=>{i.sendRequest("signal.describe",{signal_id:p}).then(v=>{t({type:"signal",data:v})}).catch(console.error)},h=p=>{i.sendRequest("field.describe",{field_id:p}).then(v=>{t({type:"field",data:v})}).catch(console.error)},g=p=>{i.sendRequest("entity.describe",{entity_id:p}).then(v=>{t({type:"entity",data:v})}).catch(console.error)},S=p=>{t({type:"chronicle",data:p})};return s("div",{class:"tab-panel",children:[s("div",{class:"tabs",children:[s("button",{class:e==="signals"?"active":"",onClick:()=>n("signals"),children:["Signals (",l.length,")"]}),s("button",{class:e==="fields"?"active":"",onClick:()=>n("fields"),children:["Fields (",o.length,")"]}),s("button",{class:e==="entities"?"active":"",onClick:()=>n("entities"),children:["Entities (",a.length,")"]}),s("button",{class:e==="chronicles"?"active":"",onClick:()=>n("chronicles"),children:["Chronicles (",u.length,")"]})]}),s("div",{class:"tab-content",children:[e==="signals"&&s("div",{class:"item-list",children:l.map(p=>s("div",{class:"item",onClick:()=>f(p),children:p},p))}),e==="fields"&&s("div",{class:"item-list",children:o.map(p=>s("div",{class:"item",onClick:()=>h(p),children:p},p))}),e==="entities"&&s("div",{class:"item-list",children:a.map(p=>s("div",{class:"item",onClick:()=>g(p),children:p},p))}),e==="chronicles"&&s("div",{class:"item-list",children:u.length===0?s("div",{class:"empty",children:"No chronicle events yet..."}):[...u].reverse().map((p,v)=>s("div",{class:"item chronicle-item",onClick:()=>S(p),children:[s("div",{class:"chronicle-name",children:p.name}),s("div",{class:"chronicle-meta",children:["Tick ",p.tick," • Era: ",p.era," • ",p.sim_time.toFixed(2),"s"]})]},v))})]})]})}function je({selectedItem:e}){if(!e)return s("div",{class:"detail-panel",children:s("div",{class:"empty",children:"Select an item to view details"})});const{type:n,data:t}=e;return s("div",{class:"detail-panel",children:[s("div",{class:"detail-header",children:[s("h2",{children:t.title||t.id||t.name}),s("div",{class:"detail-type",children:n})]}),t.doc&&s("div",{class:"detail-doc",children:t.doc}),s("div",{class:"detail-content",children:[n==="signal"&&s("div",{class:"detail-grid",children:[s("span",{class:"label",children:"ID:"}),s("span",{children:t.id}),s("span",{class:"label",children:"Type:"}),s("span",{children:t.value_type}),t.unit&&s($,{children:[s("span",{class:"label",children:"Unit:"}),s("span",{children:t.unit})]}),t.stratum&&s($,{children:[s("span",{class:"label",children:"Stratum:"}),s("span",{children:t.stratum})]}),t.range&&s($,{children:[s("span",{class:"label",children:"Range:"}),s("span",{children:[t.range[0]," … ",t.range[1]]})]})]}),n==="field"&&s("div",{class:"detail-grid",children:[s("span",{class:"label",children:"ID:"}),s("span",{children:t.id}),s("span",{class:"label",children:"Topology:"}),s("span",{children:t.topology}),s("span",{class:"label",children:"Type:"}),s("span",{children:t.value_type}),t.unit&&s($,{children:[s("span",{class:"label",children:"Unit:"}),s("span",{children:t.unit})]}),t.range&&s($,{children:[s("span",{class:"label",children:"Range:"}),s("span",{children:[t.range[0]," … ",t.range[1]]})]})]}),n==="entity"&&s("div",{class:"detail-grid",children:[s("span",{class:"label",children:"ID:"}),s("span",{children:t.id}),t.count_bounds&&s($,{children:[s("span",{class:"label",children:"Count Bounds:"}),s("span",{children:[t.count_bounds[0]," … ",t.count_bounds[1]]})]})]}),n==="chronicle"&&s($,{children:[s("div",{class:"detail-grid",children:[s("span",{class:"label",children:"Event:"}),s("span",{children:t.name}),s("span",{class:"label",children:"Tick:"}),s("span",{children:t.tick}),s("span",{class:"label",children:"Era:"}),s("span",{children:t.era}),s("span",{class:"label",children:"Sim Time:"}),s("span",{children:[t.sim_time.toFixed(2),"s"]})]}),t.fields&&t.fields.length>0&&s("div",{class:"detail-section",children:[s("h3",{children:"Fields"}),s("div",{class:"detail-grid",children:t.fields.map(([i,l])=>s($,{children:[s("span",{class:"label",children:[i,":"]}),s("span",{children:JSON.stringify(l)})]}))})]})]}),n==="assertion"&&s($,{children:s("div",{class:"detail-grid",children:[s("span",{class:"label",children:"Signal:"}),s("span",{children:t.signal_id}),s("span",{class:"label",children:"Severity:"}),s("span",{class:`severity-${t.severity}`,children:t.severity.toUpperCase()}),s("span",{class:"label",children:"Message:"}),s("span",{children:t.message}),s("span",{class:"label",children:"Tick:"}),s("span",{children:t.tick}),s("span",{class:"label",children:"Era:"}),s("span",{children:t.era}),s("span",{class:"label",children:"Sim Time:"}),s("span",{children:[t.sim_time.toFixed(2),"s"]})]})})]})]})}function Ge({ws:e}){const[n,t]=C([]),i=I(null);return P(()=>e.status!=="connected"?void 0:e.subscribe("*",o=>{const d={timestamp:new Date,type:"type"in o&&o.type.includes("event")?"event":"error"in o?"error":"info",message:JSON.stringify(o,null,2)};t(a=>[...a,d].slice(-500))}),[e.status]),P(()=>{var r;(r=i.current)==null||r.scrollIntoView({behavior:"smooth"})},[n]),s("div",{class:"log-panel",children:[s("div",{class:"log-header",children:[s("h3",{children:"Log"}),s("button",{onClick:()=>{t([])},class:"small",children:"Clear"})]}),s("div",{class:"log-content",children:[n.map((r,o)=>s("div",{class:`log-entry log-${r.type}`,children:[s("span",{class:"log-time",children:["[",r.timestamp.toLocaleTimeString(),"]"]}),s("span",{class:"log-message",children:r.message})]},o)),s("div",{ref:i})]})]})}function Ke({ws:e,onSelectAssertion:n}){const[t,i]=C([]),[l,r]=C("all");P(()=>e.status!=="connected"?void 0:((()=>{e.sendRequest("assertion.failures").then(u=>{i(u.failures||[])}).catch(console.error)})(),e.subscribe("assertion",u=>{"type"in u&&u.type==="assertion"&&i(c=>[u.payload,...c].slice(0,200))})),[e.status]);const o=l==="all"?t:t.filter(a=>a.severity===l),d={warn:t.filter(a=>a.severity==="warn").length,error:t.filter(a=>a.severity==="error").length,fatal:t.filter(a=>a.severity==="fatal").length};return s("div",{class:"assertion-panel",children:[s("div",{class:"assertion-header",children:[s("h3",{children:"Assertions"}),s("div",{class:"assertion-filters",children:[s("button",{class:`filter-btn ${l==="all"?"active":""}`,onClick:()=>r("all"),children:["All (",t.length,")"]}),s("button",{class:`filter-btn severity-warn ${l==="warn"?"active":""}`,onClick:()=>r("warn"),children:["Warn (",d.warn,")"]}),s("button",{class:`filter-btn severity-error ${l==="error"?"active":""}`,onClick:()=>r("error"),children:["Error (",d.error,")"]}),s("button",{class:`filter-btn severity-fatal ${l==="fatal"?"active":""}`,onClick:()=>r("fatal"),children:["Fatal (",d.fatal,")"]})]})]}),s("div",{class:"assertion-content",children:o.length===0?s("div",{class:"empty",children:l==="all"?"No assertion failures":`No ${l} assertions`}):s("div",{class:"assertion-list",children:o.map((a,_)=>s("div",{class:`assertion-item severity-${a.severity}`,onClick:()=>n(a),children:[s("div",{class:"assertion-row",children:[s("span",{class:`assertion-badge severity-${a.severity}`,children:a.severity.toUpperCase()}),s("span",{class:"assertion-signal",children:a.signal_id}),s("span",{class:"assertion-tick",children:["Tick ",a.tick]})]}),s("div",{class:"assertion-message",children:a.message})]},_))})})]})}function Qe(){const e=ze(`ws://${location.host}/ws`),[n,t]=C("signals"),[i,l]=C(null),[r,o]=C(null),[d,a]=C(0);P(()=>{if(e.status!=="connected")return;const u=e.subscribe("tick",c=>{"type"in c&&c.type==="tick"&&o(c.payload)});return e.sendRequest("status").then(c=>{c&&o(c)}).catch(console.error),u},[e.status]),P(()=>e.status!=="connected"?void 0:(e.sendRequest("assertion.failures").then(c=>{a((c.failures||[]).length)}).catch(console.error),e.subscribe("assertion",()=>{a(c=>c+1)})),[e.status]);const _=u=>{l({type:"assertion",data:u})};return s("div",{class:"app",children:[s(Je,{status:e.status,tickInfo:r,ws:e,hasErrors:d>0}),s("div",{class:"main-layout",children:[s(Ve,{currentTab:n,onTabChange:t,onSelectItem:l,ws:e}),s("div",{class:"center-panel",children:[s(je,{selectedItem:i,ws:e}),s(Ge,{ws:e})]}),s(Ke,{ws:e,onSelectAssertion:_})]})]})}Ue(s(Qe,{}),document.getElementById("app"));
