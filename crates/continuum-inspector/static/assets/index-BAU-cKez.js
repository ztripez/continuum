(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}})();var V,y,ye,N,_e,ge,be,ke,ee,Q,X,q={},Se=[],Te=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,j=Array.isArray;function P(e,n){for(var t in n)e[t]=n[t];return e}function ne(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Fe(e,n,t){var i,l,r,o={};for(r in n)r=="key"?i=n[r]:r=="ref"?l=n[r]:o[r]=n[r];if(arguments.length>2&&(o.children=arguments.length>3?V.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)o[r]===void 0&&(o[r]=e.defaultProps[r]);return M(e,o,i,l,null)}function M(e,n,t,i,l){var r={type:e,props:n,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++ye,__i:-1,__u:0};return l==null&&y.vnode!=null&&y.vnode(r),r}function w(e){return e.children}function O(e,n){this.props=e,this.context=n}function x(e,n){if(n==null)return e.__?x(e.__,e.__i+1):null;for(var t;n<e.__k.length;n++)if((t=e.__k[n])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?x(e):null}function we(e){var n,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((t=e.__k[n])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return we(e)}}function se(e){(!e.__d&&(e.__d=!0)&&N.push(e)&&!z.__r++||_e!=y.debounceRendering)&&((_e=y.debounceRendering)||ge)(z)}function z(){for(var e,n,t,i,l,r,o,a=1;N.length;)N.length>a&&N.sort(be),e=N.shift(),a=N.length,e.__d&&(t=void 0,i=void 0,l=(i=(n=e).__v).__e,r=[],o=[],n.__P&&((t=P({},i)).__v=i.__v+1,y.vnode&&y.vnode(t),te(n.__P,t,i,n.__n,n.__P.namespaceURI,32&i.__u?[l]:null,r,l??x(i),!!(32&i.__u),o),t.__v=i.__v,t.__.__k[t.__i]=t,$e(r,t,o),i.__e=i.__=null,t.__e!=l&&we(t)));z.__r=0}function Ce(e,n,t,i,l,r,o,a,d,c,u){var _,v,f,g,S,h,p,m=i&&i.__k||Se,$=n.length;for(d=qe(t,n,m,d,$),_=0;_<$;_++)(f=t.__k[_])!=null&&(v=f.__i==-1?q:m[f.__i]||q,f.__i=_,h=te(e,f,v,l,r,o,a,d,c,u),g=f.__e,f.ref&&v.ref!=f.ref&&(v.ref&&re(v.ref,null,f),u.push(f.ref,f.__c||g,f)),S==null&&g!=null&&(S=g),(p=!!(4&f.__u))||v.__k===f.__k?d=Ee(f,d,e,p):typeof f.type=="function"&&h!==void 0?d=h:g&&(d=g.nextSibling),f.__u&=-7);return t.__e=S,d}function qe(e,n,t,i,l){var r,o,a,d,c,u=t.length,_=u,v=0;for(e.__k=new Array(l),r=0;r<l;r++)(o=n[r])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=e.__k[r]=M(null,o,null,null,null):j(o)?o=e.__k[r]=M(w,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=e.__k[r]=M(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):e.__k[r]=o,d=r+v,o.__=e,o.__b=e.__b+1,a=null,(c=o.__i=De(o,t,d,_))!=-1&&(_--,(a=t[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(l>u?v--:l<u&&v++),typeof o.type!="function"&&(o.__u|=4)):c!=d&&(c==d-1?v--:c==d+1?v++:(c>d?v--:v++,o.__u|=4))):e.__k[r]=null;if(_)for(r=0;r<u;r++)(a=t[r])!=null&&!(2&a.__u)&&(a.__e==i&&(i=x(a)),Re(a,a));return i}function Ee(e,n,t,i){var l,r;if(typeof e.type=="function"){for(l=e.__k,r=0;l&&r<l.length;r++)l[r]&&(l[r].__=e,n=Ee(l[r],n,t,i));return n}e.__e!=n&&(i&&(n&&e.type&&!n.parentNode&&(n=x(e)),t.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function De(e,n,t,i){var l,r,o,a=e.key,d=e.type,c=n[t],u=c!=null&&(2&c.__u)==0;if(c===null&&a==null||u&&a==c.key&&d==c.type)return t;if(i>(u?1:0)){for(l=t-1,r=t+1;l>=0||r<n.length;)if((c=n[o=l>=0?l--:r++])!=null&&!(2&c.__u)&&a==c.key&&d==c.type)return o}return-1}function oe(e,n,t){n[0]=="-"?e.setProperty(n,t??""):e[n]=t==null?"":typeof t!="number"||Te.test(n)?t:t+"px"}function A(e,n,t,i,l){var r,o;e:if(n=="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(n in i)t&&n in t||oe(e.style,n,"");if(t)for(n in t)i&&t[n]==i[n]||oe(e.style,n,t[n])}else if(n[0]=="o"&&n[1]=="n")r=n!=(n=n.replace(ke,"$1")),o=n.toLowerCase(),n=o in e||n=="onFocusOut"||n=="onFocusIn"?o.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+r]=t,t?i?t.u=i.u:(t.u=ee,e.addEventListener(n,r?X:Q,r)):e.removeEventListener(n,r?X:Q,r);else{if(l=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&t==1?"":t))}}function ce(e){return function(n){if(this.l){var t=this.l[n.type+e];if(n.t==null)n.t=ee++;else if(n.t<t.u)return;return t(y.event?y.event(n):n)}}}function te(e,n,t,i,l,r,o,a,d,c){var u,_,v,f,g,S,h,p,m,$,R,U,T,le,W,F,G,C=n.type;if(n.constructor!==void 0)return null;128&t.__u&&(d=!!(32&t.__u),r=[a=n.__e=t.__e]),(u=y.__b)&&u(n);e:if(typeof C=="function")try{if(p=n.props,m="prototype"in C&&C.prototype.render,$=(u=C.contextType)&&i[u.__c],R=u?$?$.props.value:u.__:i,t.__c?h=(_=n.__c=t.__c).__=_.__E:(m?n.__c=_=new C(p,R):(n.__c=_=new O(p,R),_.constructor=C,_.render=Ue),$&&$.sub(_),_.state||(_.state={}),_.__n=i,v=_.__d=!0,_.__h=[],_._sb=[]),m&&_.__s==null&&(_.__s=_.state),m&&C.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=P({},_.__s)),P(_.__s,C.getDerivedStateFromProps(p,_.__s))),f=_.props,g=_.state,_.__v=n,v)m&&C.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),m&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(m&&C.getDerivedStateFromProps==null&&p!==f&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(p,R),n.__v==t.__v||!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(p,_.__s,R)===!1){for(n.__v!=t.__v&&(_.props=p,_.state=_.__s,_.__d=!1),n.__e=t.__e,n.__k=t.__k,n.__k.some(function(H){H&&(H.__=n)}),U=0;U<_._sb.length;U++)_.__h.push(_._sb[U]);_._sb=[],_.__h.length&&o.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(p,_.__s,R),m&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(f,g,S)})}if(_.context=R,_.props=p,_.__P=e,_.__e=!1,T=y.__r,le=0,m){for(_.state=_.__s,_.__d=!1,T&&T(n),u=_.render(_.props,_.state,_.context),W=0;W<_._sb.length;W++)_.__h.push(_._sb[W]);_._sb=[]}else do _.__d=!1,T&&T(n),u=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++le<25);_.state=_.__s,_.getChildContext!=null&&(i=P(P({},i),_.getChildContext())),m&&!v&&_.getSnapshotBeforeUpdate!=null&&(S=_.getSnapshotBeforeUpdate(f,g)),F=u,u!=null&&u.type===w&&u.key==null&&(F=Pe(u.props.children)),a=Ce(e,j(F)?F:[F],n,t,i,l,r,o,a,d,c),_.base=n.__e,n.__u&=-161,_.__h.length&&o.push(_),h&&(_.__E=_.__=null)}catch(H){if(n.__v=null,d||r!=null)if(H.then){for(n.__u|=d?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;r[r.indexOf(a)]=null,n.__e=a}else{for(G=r.length;G--;)ne(r[G]);Y(n)}else n.__e=t.__e,n.__k=t.__k,H.then||Y(n);y.__e(H,n,t)}else r==null&&n.__v==t.__v?(n.__k=t.__k,n.__e=t.__e):a=n.__e=Le(t.__e,n,t,i,l,r,o,d,c);return(u=y.diffed)&&u(n),128&n.__u?void 0:a}function Y(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Y)}function $e(e,n,t){for(var i=0;i<t.length;i++)re(t[i],t[++i],t[++i]);y.__c&&y.__c(n,e),e.some(function(l){try{e=l.__h,l.__h=[],e.some(function(r){r.call(l)})}catch(r){y.__e(r,l.__v)}})}function Pe(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:j(e)?e.map(Pe):P({},e)}function Le(e,n,t,i,l,r,o,a,d){var c,u,_,v,f,g,S,h=t.props||q,p=n.props,m=n.type;if(m=="svg"?l="http://www.w3.org/2000/svg":m=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((f=r[c])&&"setAttribute"in f==!!m&&(m?f.localName==m:f.nodeType==3)){e=f,r[c]=null;break}}if(e==null){if(m==null)return document.createTextNode(p);e=document.createElementNS(l,m,p.is&&p),a&&(y.__m&&y.__m(n,r),a=!1),r=null}if(m==null)h===p||a&&e.data==p||(e.data=p);else{if(r=r&&V.call(e.childNodes),!a&&r!=null)for(h={},c=0;c<e.attributes.length;c++)h[(f=e.attributes[c]).name]=f.value;for(c in h)if(f=h[c],c!="children"){if(c=="dangerouslySetInnerHTML")_=f;else if(!(c in p)){if(c=="value"&&"defaultValue"in p||c=="checked"&&"defaultChecked"in p)continue;A(e,c,null,f,l)}}for(c in p)f=p[c],c=="children"?v=f:c=="dangerouslySetInnerHTML"?u=f:c=="value"?g=f:c=="checked"?S=f:a&&typeof f!="function"||h[c]===f||A(e,c,f,h[c],l);if(u)a||_&&(u.__html==_.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),n.__k=[];else if(_&&(e.innerHTML=""),Ce(n.type=="template"?e.content:e,j(v)?v:[v],n,t,i,m=="foreignObject"?"http://www.w3.org/1999/xhtml":l,r,o,r?r[0]:t.__k&&x(t,0),a,d),r!=null)for(c=r.length;c--;)ne(r[c]);a||(c="value",m=="progress"&&g==null?e.removeAttribute("value"):g!=null&&(g!==e[c]||m=="progress"&&!g||m=="option"&&g!=h[c])&&A(e,c,g,h[c],l),c="checked",S!=null&&S!=e[c]&&A(e,c,S,h[c],l))}return e}function re(e,n,t){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&n==null||(e.__u=e(n))}else e.current=n}catch(l){y.__e(l,t)}}function Re(e,n,t){var i,l;if(y.unmount&&y.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||re(i,null,n)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){y.__e(r,n)}i.base=i.__P=null}if(i=e.__k)for(l=0;l<i.length;l++)i[l]&&Re(i[l],n,t||typeof e.type!="function");t||ne(e.__e),e.__c=e.__=e.__e=void 0}function Ue(e,n,t){return this.constructor(e,t)}function We(e,n,t){var i,l,r,o;n==document&&(n=document.documentElement),y.__&&y.__(e,n),l=(i=!1)?null:n.__k,r=[],o=[],te(n,e=n.__k=Fe(w,null,[e]),l||q,q,n.namespaceURI,l?null:n.firstChild?V.call(n.childNodes):null,r,l?l.__e:n.firstChild,i,o),$e(r,e,o)}V=Se.slice,y={__e:function(e,n,t,i){for(var l,r,o;n=n.__;)if((l=n.__c)&&!l.__)try{if((r=l.constructor)&&r.getDerivedStateFromError!=null&&(l.setState(r.getDerivedStateFromError(e)),o=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,i||{}),o=l.__d),o)return l.__E=l}catch(a){e=a}throw e}},ye=0,O.prototype.setState=function(e,n){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=P({},this.state),typeof e=="function"&&(e=e(P({},t),this.props)),e&&P(t,e),e!=null&&this.__v&&(n&&this._sb.push(n),se(this))},O.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),se(this))},O.prototype.render=w,N=[],ge=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,be=function(e,n){return e.__v.__b-n.__v.__b},z.__r=0,ke=/(PointerCapture)$|Capture$/i,ee=0,Q=ce(!1),X=ce(!0);var Ae=0;function s(e,n,t,i,l,r){n||(n={});var o,a,d=n;if("ref"in d)for(a in d={},n)a=="ref"?o=n[a]:d[a]=n[a];var c={type:e,props:d,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ae,__i:-1,__u:0,__source:l,__self:r};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)d[a]===void 0&&(d[a]=o[a]);return y.vnode&&y.vnode(c),c}var D,b,K,ae,J=0,Ne=[],k=y,de=k.__b,ue=k.__r,he=k.diffed,fe=k.__c,pe=k.unmount,ve=k.__;function ie(e,n){k.__h&&k.__h(b,e,J||n),J=0;var t=b.__H||(b.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function E(e){return J=1,Me(xe,e)}function Me(e,n,t){var i=ie(D++,2);if(i.t=e,!i.__c&&(i.__=[xe(void 0,n),function(a){var d=i.__N?i.__N[0]:i.__[0],c=i.t(d,a);d!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=b,!b.__f)){var l=function(a,d,c){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(v){return!!v.__c});if(u.every(function(v){return!v.__N}))return!r||r.call(this,a,d,c);var _=i.__c.props!==a;return u.forEach(function(v){if(v.__N){var f=v.__[0];v.__=v.__N,v.__N=void 0,f!==v.__[0]&&(_=!0)}}),r&&r.call(this,a,d,c)||_};b.__f=!0;var r=b.shouldComponentUpdate,o=b.componentWillUpdate;b.componentWillUpdate=function(a,d,c){if(this.__e){var u=r;r=void 0,l(a,d,c),r=u}o&&o.call(this,a,d,c)},b.shouldComponentUpdate=l}return i.__N||i.__}function L(e,n){var t=ie(D++,3);!k.__s&&He(t.__H,n)&&(t.__=e,t.u=n,b.__H.__h.push(t))}function I(e){return J=5,Oe(function(){return{current:e}},[])}function Oe(e,n){var t=ie(D++,7);return He(t.__H,n)&&(t.__=e(),t.__H=n,t.__h=e),t.__}function Ie(){for(var e;e=Ne.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(B),e.__H.__h.forEach(Z),e.__H.__h=[]}catch(n){e.__H.__h=[],k.__e(n,e.__v)}}k.__b=function(e){b=null,de&&de(e)},k.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),ve&&ve(e,n)},k.__r=function(e){ue&&ue(e),D=0;var n=(b=e.__c).__H;n&&(K===b?(n.__h=[],b.__h=[],n.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(n.__h.forEach(B),n.__h.forEach(Z),n.__h=[],D=0)),K=b},k.diffed=function(e){he&&he(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(Ne.push(n)!==1&&ae===k.requestAnimationFrame||((ae=k.requestAnimationFrame)||Be)(Ie)),n.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),K=b=null},k.__c=function(e,n){n.some(function(t){try{t.__h.forEach(B),t.__h=t.__h.filter(function(i){return!i.__||Z(i)})}catch(i){n.some(function(l){l.__h&&(l.__h=[])}),n=[],k.__e(i,t.__v)}}),fe&&fe(e,n)},k.unmount=function(e){pe&&pe(e);var n,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{B(i)}catch(l){n=l}}),t.__H=void 0,n&&k.__e(n,t.__v))};var me=typeof requestAnimationFrame=="function";function Be(e){var n,t=function(){clearTimeout(i),me&&cancelAnimationFrame(n),setTimeout(e)},i=setTimeout(t,35);me&&(n=requestAnimationFrame(t))}function B(e){var n=b,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),b=n}function Z(e){var n=b;e.__c=e.__(),b=n}function He(e,n){return!e||e.length!==n.length||n.some(function(t,i){return t!==e[i]})}function xe(e,n){return typeof n=="function"?n(e):n}function ze(e){const[n,t]=E("connecting"),i=I(null),l=I(1),r=I(new Map);L(()=>{const d=new WebSocket(e);return i.current=d,d.onopen=()=>{console.log("WebSocket connected"),t("connected")},d.onclose=()=>{console.log("WebSocket disconnected"),t("disconnected")},d.onerror=c=>{console.error("WebSocket error:",c),t("disconnected")},d.onmessage=c=>{try{const u=JSON.parse(c.data),_="type"in u?u.type:"response",v=r.current.get(_);v&&v.forEach(g=>g(u));const f=r.current.get("*");f&&f.forEach(g=>g(u))}catch(u){console.error("Failed to parse WebSocket message:",u)}},()=>{d.close()}},[e]);const o=(d,c)=>new Promise((u,_)=>{if(!i.current||i.current.readyState!==WebSocket.OPEN){_(new Error("WebSocket not connected"));return}const v=l.current++,f={id:v,type:d,payload:c},S=a("response",h=>{"id"in h&&h.id===v&&(S(),h.ok?u(h.payload):_(new Error(h.error||"Request failed")))});try{i.current.send(JSON.stringify(f))}catch(h){S(),_(h)}setTimeout(()=>{S(),_(new Error("Request timeout"))},3e4)}),a=(d,c)=>(r.current.has(d)||r.current.set(d,new Set),r.current.get(d).add(c),()=>{const u=r.current.get(d);u&&(u.delete(c),u.size===0&&r.current.delete(d))});return{status:n,sendRequest:o,subscribe:a}}function Je({status:e,tickInfo:n,ws:t}){return s("header",{class:"header",children:[s("h1",{children:"Continuum Inspector"}),s("div",{class:"header-info",children:[n&&s("div",{class:"tick-info",children:[s("span",{children:["Tick: ",n.tick]}),s("span",{children:["Era: ",n.era]}),s("span",{children:["Time: ",n.sim_time.toFixed(2),"s"]}),s("span",{children:["Phase: ",n.phase]})]}),s("div",{class:"status",children:[s("span",{class:`status-indicator status-${e}`}),s("span",{children:e==="connected"?"Connected":e==="connecting"?"Connecting...":"Disconnected"})]})]})]})}function Ve({ws:e}){const[n,t]=E(!1);return s("aside",{class:"sidebar",children:s("div",{class:"panel",children:[s("div",{class:"panel-header",children:s("h2",{children:"Simulation"})}),s("div",{class:"controls",children:[s("button",{onClick:()=>{e.sendRequest("status").catch(console.error)},children:"Status"}),s("button",{onClick:()=>{e.sendRequest("step",{count:1}).catch(console.error)},disabled:n,children:"Step"}),s("button",{onClick:()=>{e.sendRequest("run").then(()=>{t(!0)}).catch(console.error)},disabled:n,class:"primary",children:"Run"}),s("button",{onClick:()=>{e.sendRequest("stop").then(()=>{t(!1)}).catch(console.error)},disabled:!n,class:"danger",children:"Stop"})]})]})})}function je({currentTab:e,onTabChange:n,onSelectItem:t,ws:i}){const[l,r]=E([]),[o,a]=E([]),[d,c]=E([]),[u,_]=E([]);L(()=>i.status!=="connected"?void 0:(i.sendRequest("signal.list").then(p=>{r(p.signals||[])}).catch(console.error),i.sendRequest("field.list").then(p=>{a(p.fields||[])}).catch(console.error),i.sendRequest("entity.list").then(p=>{c(p.entities||[])}).catch(console.error),i.subscribe("chronicle.event",p=>{"type"in p&&p.type==="chronicle.event"&&_(m=>[...m,{...p.payload,timestamp:new Date}].slice(-200))})),[i.status]);const v=h=>{i.sendRequest("signal.describe",{signal_id:h}).then(p=>{t({type:"signal",data:p})}).catch(console.error)},f=h=>{i.sendRequest("field.describe",{field_id:h}).then(p=>{t({type:"field",data:p})}).catch(console.error)},g=h=>{i.sendRequest("entity.describe",{entity_id:h}).then(p=>{t({type:"entity",data:p})}).catch(console.error)},S=h=>{t({type:"chronicle",data:h})};return s("div",{class:"tab-panel",children:[s("div",{class:"tabs",children:[s("button",{class:e==="signals"?"active":"",onClick:()=>n("signals"),children:["Signals (",l.length,")"]}),s("button",{class:e==="fields"?"active":"",onClick:()=>n("fields"),children:["Fields (",o.length,")"]}),s("button",{class:e==="entities"?"active":"",onClick:()=>n("entities"),children:["Entities (",d.length,")"]}),s("button",{class:e==="chronicles"?"active":"",onClick:()=>n("chronicles"),children:["Chronicles (",u.length,")"]})]}),s("div",{class:"tab-content",children:[e==="signals"&&s("div",{class:"item-list",children:l.map(h=>s("div",{class:"item",onClick:()=>v(h),children:h},h))}),e==="fields"&&s("div",{class:"item-list",children:o.map(h=>s("div",{class:"item",onClick:()=>f(h),children:h},h))}),e==="entities"&&s("div",{class:"item-list",children:d.map(h=>s("div",{class:"item",onClick:()=>g(h),children:h},h))}),e==="chronicles"&&s("div",{class:"item-list",children:u.length===0?s("div",{class:"empty",children:"No chronicle events yet..."}):[...u].reverse().map((h,p)=>s("div",{class:"item chronicle-item",onClick:()=>S(h),children:[s("div",{class:"chronicle-name",children:h.name}),s("div",{class:"chronicle-meta",children:["Tick ",h.tick," • Era: ",h.era," • ",h.sim_time.toFixed(2),"s"]})]},p))})]})]})}function Ge({selectedItem:e}){if(!e)return s("div",{class:"detail-panel",children:s("div",{class:"empty",children:"Select an item to view details"})});const{type:n,data:t}=e;return s("div",{class:"detail-panel",children:[s("div",{class:"detail-header",children:[s("h2",{children:t.title||t.id||t.name}),s("div",{class:"detail-type",children:n})]}),t.doc&&s("div",{class:"detail-doc",children:t.doc}),s("div",{class:"detail-content",children:[n==="signal"&&s("div",{class:"detail-grid",children:[s("span",{class:"label",children:"ID:"}),s("span",{children:t.id}),s("span",{class:"label",children:"Type:"}),s("span",{children:t.value_type}),t.unit&&s(w,{children:[s("span",{class:"label",children:"Unit:"}),s("span",{children:t.unit})]}),t.stratum&&s(w,{children:[s("span",{class:"label",children:"Stratum:"}),s("span",{children:t.stratum})]}),t.range&&s(w,{children:[s("span",{class:"label",children:"Range:"}),s("span",{children:[t.range[0]," … ",t.range[1]]})]})]}),n==="field"&&s("div",{class:"detail-grid",children:[s("span",{class:"label",children:"ID:"}),s("span",{children:t.id}),s("span",{class:"label",children:"Topology:"}),s("span",{children:t.topology}),s("span",{class:"label",children:"Type:"}),s("span",{children:t.value_type}),t.unit&&s(w,{children:[s("span",{class:"label",children:"Unit:"}),s("span",{children:t.unit})]}),t.range&&s(w,{children:[s("span",{class:"label",children:"Range:"}),s("span",{children:[t.range[0]," … ",t.range[1]]})]})]}),n==="entity"&&s("div",{class:"detail-grid",children:[s("span",{class:"label",children:"ID:"}),s("span",{children:t.id}),t.count_bounds&&s(w,{children:[s("span",{class:"label",children:"Count Bounds:"}),s("span",{children:[t.count_bounds[0]," … ",t.count_bounds[1]]})]})]}),n==="chronicle"&&s(w,{children:[s("div",{class:"detail-grid",children:[s("span",{class:"label",children:"Event:"}),s("span",{children:t.name}),s("span",{class:"label",children:"Tick:"}),s("span",{children:t.tick}),s("span",{class:"label",children:"Era:"}),s("span",{children:t.era}),s("span",{class:"label",children:"Sim Time:"}),s("span",{children:[t.sim_time.toFixed(2),"s"]})]}),t.fields&&t.fields.length>0&&s("div",{class:"detail-section",children:[s("h3",{children:"Fields"}),s("div",{class:"detail-grid",children:t.fields.map(([i,l])=>s(w,{children:[s("span",{class:"label",children:[i,":"]}),s("span",{children:JSON.stringify(l)})]}))})]})]})]})]})}function Ke({ws:e}){const[n,t]=E([]),i=I(null);return L(()=>e.status!=="connected"?void 0:e.subscribe("*",o=>{const a={timestamp:new Date,type:"type"in o&&o.type.includes("event")?"event":"error"in o?"error":"info",message:JSON.stringify(o,null,2)};t(d=>[...d,a].slice(-500))}),[e.status]),L(()=>{var r;(r=i.current)==null||r.scrollIntoView({behavior:"smooth"})},[n]),s("div",{class:"log-panel",children:[s("div",{class:"log-header",children:[s("h3",{children:"Log"}),s("button",{onClick:()=>{t([])},class:"small",children:"Clear"})]}),s("div",{class:"log-content",children:[n.map((r,o)=>s("div",{class:`log-entry log-${r.type}`,children:[s("span",{class:"log-time",children:["[",r.timestamp.toLocaleTimeString(),"]"]}),s("span",{class:"log-message",children:r.message})]},o)),s("div",{ref:i})]})]})}function Qe(){const e=ze(`ws://${location.host}/ws`),[n,t]=E("signals"),[i,l]=E(null),[r,o]=E(null);return L(()=>{if(e.status!=="connected")return;const a=e.subscribe("tick",d=>{"type"in d&&d.type==="tick"&&o(d.payload)});return e.sendRequest("status").catch(console.error),a},[e.status]),s("div",{class:"app",children:[s(Je,{status:e.status,tickInfo:r,ws:e}),s("div",{class:"main-layout",children:[s(Ve,{ws:e}),s(je,{currentTab:n,onTabChange:t,onSelectItem:l,ws:e}),s("div",{class:"right-panel",children:[s(Ge,{selectedItem:i,ws:e}),s(Ke,{ws:e})]})]})]})}We(s(Qe,{}),document.getElementById("app"));
